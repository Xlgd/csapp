A. 
不带保护者：buf在%rsp处，v在%rsp偏移量为24的地方
带保护者：buf在偏移量为16的地方，v在%rsp偏移量为8的地方，金丝雀在%rsp偏移量为40的地方

B.
在有保护的代码中，局部变量v比buf更靠近栈顶，因此buf溢出就不会破坏v的值。